<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Numerical Solutions - Module 1</title>
<!-- Load MathJax -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f4f9;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #333;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 30px;
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  th, td {
    padding: 15px;
    border: 1px solid #ddd;
    vertical-align: top;
  }
  th {
    background-color: #f0f0f0;
    text-align: left;
    font-size: 18px;
  }
  button {
    padding: 8px 12px;
    margin: 5px 0;
    cursor: pointer;
    border: none;
    background-color: #4CAF50;
    color: white;
    border-radius: 4px;
  }
  button:hover {
    background-color: #45a049;
  }
  .explanation {
    display: none;
    background-color: #eef5f9;
    padding: 10px;
    border-left: 4px solid #2196F3;
    margin-top: 5px;
    line-height: 1.5;
  }
  input {
    margin: 5px 0;
  }
</style>
</head>
<body>

<h1>Numerical Solutions to Equations - Module 1</h1>

<table>
<tr>
  <th>Problem</th>
  <th>Solution / Input</th>
  <th>Explanation</th>
</tr>

<tr>
  <td>
    Consider \(y = \frac{\arctan(x)}{\sqrt{x}}\). Let \(m\) be the maximum point at \(x = a\). <br><br>
    <strong>Part a)</strong> Show that \(a\) satisfies \(a = \tan\Big(\frac{2a}{1 + a^2}\Big)\) <br>
    <strong>Part b)</strong> Verify that \(a\) lies between 1.3 and 1.5 <br>
    <strong>Part c)</strong> Use an iterative formula to determine \(a\) correct to 2 decimal places.
  </td>
  <td>
    <button onclick="toggleExplanation('expA')">Show Explanation for Part a</button><br>
    <button onclick="toggleExplanation('expB')">Show Explanation for Part b</button><br>
    <button onclick="toggleExplanation('expC')">Show Explanation for Part c</button><br>
    <div id="expCInput" style="margin-top:10px; display:none;">
      Initial guess: <input type="number" id="guessC" value="1.4" step="0.01"><br>
      Number of iterations: <input type="number" id="stepsC" value="5" min="1" max="20"><br>
      <button onclick="iterateC()">Run Iteration</button>
      <div id="iterationsC"></div>
      <br>
      Enter approximate root: <input type="number" id="rootC" step="0.01">
      <button onclick="checkRootC()">Check Answer</button>
      <div id="resultC"></div>
    </div>
  </td>
  <td>
    <div id="expA" class="explanation">
      <strong>Part a Explanation:</strong><br>
      To find the maximum of \(y = \frac{\arctan(x)}{\sqrt{x}}\), differentiate using the quotient rule:<br>
      \[
        y' = \frac{\sqrt{x} \cdot \frac{1}{1+x^2} - \arctan(x) \cdot \frac{1}{2\sqrt{x}}}{x}
      \]<br>
      Set \(y' = 0\) for maximum: <br>
      \[
        \sqrt{x} \cdot \frac{1}{1+x^2} - \frac{\arctan(x)}{2\sqrt{x}} = 0
      \]<br>
      Multiply through by \(2\sqrt{x}(1+x^2)\):<br>
      \[
        2x - (1+x^2)\arctan(x) = 0 \implies a = \tan\Big(\frac{2a}{1+a^2}\Big)
      \]
    </div>

    <div id="expB" class="explanation">
      <strong>Part b Explanation:</strong><br>
      Using \(a = \tan\Big(\frac{2a}{1+a^2}\Big)\), check boundary values:<br>
      - \(x = 1.3\) → \(\tan(2*1.3/(1+1.3^2)) \approx 1.39\) → slightly larger than 1.3<br>
      - \(x = 1.5\) → \(\tan(2*1.5/(1+1.5^2)) \approx 1.41\) → slightly smaller than 1.5<br>
      Hence, \(a\) lies between 1.3 and 1.5.
    </div>

    <div id="expC" class="explanation">
      <strong>Part c Explanation:</strong><br>
      Use the iterative formula:<br>
      \[
        a_{n+1} = \tan\Big(\frac{2 a_n}{1 + a_n^2}\Big)
      \]<br>
      Steps:<br>
      1. Start with initial guess \(a_0 = 1.4\)<br>
      2. Compute successive approximations using the formula<br>
      3. Stop when desired accuracy (2 decimal places) is reached<br>
      This method shows how the iteration converges to the maximum.
    </div>
  </td>
</tr>
</table>

<script>
function toggleExplanation(id) {
  const elem = document.getElementById(id);
  elem.style.display = (elem.style.display === "block") ? "none" : "block";
  if(id === 'expC') document.getElementById('expCInput').style.display = "block";
}

function iterateC() {
  const guess = parseFloat(document.getElementById('guessC').value);
  const steps = parseInt(document.getElementById('stepsC').value);
  let iterations = [guess];

  for(let i=1;i<=steps;i++){
    const last = iterations[i-1];
    const next = Math.tan(2*last/(1 + last*last));
    iterations.push(next);
  }

  // Build table
  let table = '<table border="1" style="border-collapse: collapse; margin-top:5px;"><tr><th>Iteration</th><th>aₙ</th></tr>';
  iterations.forEach((val, idx) => {
    table += `<tr><td>${idx}</td><td>${val.toFixed(4)}</td></tr>`;
  });
  table += '</table>';
  document.getElementById('iterationsC').innerHTML = table;
}

function checkRootC() {
  const student = parseFloat(document.getElementById('rootC').value);
  const correct = 1.39; // approx to 2 d.p.
  const resultDiv = document.getElementById('resultC');
  if(Math.abs(student - correct) <= 0.01){
    resultDiv.textContent = "✅ Correct!";
    resultDiv.style.color = "green";
  } else {
    resultDiv.textContent = "❌ Incorrect. Try again.";
    resultDiv.style.color = "red";
  }
}
</script>

</body>
</html>